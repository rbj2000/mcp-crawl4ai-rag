# Production Environment - Hybrid AI Provider (OpenAI + Ollama)
# ===============================================================

# Server Configuration
HOST=0.0.0.0
PORT=8051
TRANSPORT=sse
ENVIRONMENT=production

# AI Provider Configuration - Hybrid
AI_PROVIDER=mixed
EMBEDDING_PROVIDER=openai  # Use OpenAI for embeddings (consistency)
LLM_PROVIDER=ollama        # Use Ollama for LLM (cost efficiency)

# OpenAI Configuration (for embeddings only)
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536

# Ollama Configuration (for LLM only)
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_LLM_MODEL=llama3.2:3b
MODEL_CHOICE=llama3.2:3b

# Ollama Performance Tuning
OLLAMA_NUM_PARALLEL=2
OLLAMA_LOAD_TIMEOUT=300
OLLAMA_REQUEST_TIMEOUT=120

# Database Configuration - Production with Supabase
VECTOR_DB_PROVIDER=supabase
SUPABASE_URL=${SUPABASE_URL}
SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY}

# RAG Strategy Configuration - Optimized for hybrid
USE_CONTEXTUAL_EMBEDDINGS=true
USE_HYBRID_SEARCH=true
USE_AGENTIC_RAG=true
USE_RERANKING=true
USE_KNOWLEDGE_GRAPH=false

# Performance Configuration
MAX_CONCURRENT_REQUESTS=15
BATCH_SIZE=100
CACHE_TTL=3600
EMBEDDINGS_BATCH_SIZE=50

# OpenAI Rate Limiting
OPENAI_RPM_LIMIT=3000
OPENAI_TPM_LIMIT=150000

# Security Configuration
CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
RATE_LIMIT_PER_MINUTE=150
MAX_CONTENT_LENGTH=10485760  # 10MB

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/production.log
ENABLE_METRICS=true

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# Docker Compose Profiles
COMPOSE_PROFILES=hybrid,monitoring

# Monitoring Configuration
PROMETHEUS_ENDPOINT=http://prometheus:9090
GRAFANA_ENDPOINT=http://grafana:3000
ENABLE_TRACING=true

# Failover Configuration
EMBEDDING_FALLBACK_PROVIDER=ollama
LLM_FALLBACK_PROVIDER=openai
FAILOVER_TIMEOUT=30
AUTO_FAILBACK=true
FAILBACK_DELAY=300  # 5 minutes

# Cost Optimization
ENABLE_COST_TRACKING=true
MONTHLY_BUDGET_LIMIT=1000  # USD
COST_ALERT_THRESHOLD=80    # Percentage

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30